<header class="navbar navbar-inverse">

    <div class="container">
    <nav role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" data-target="#navbarCollapse" data-toggle="collapse" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="{{ site.baseurl }}/" class="navbar-brand">{{ site.title }}</a>
        </div>
        <!-- Collection of nav links, forms, and other content for toggling -->
        <div id="navbarCollapse" class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
            	<li class="dropdown">
            		<a data-toggle="dropdown" class="dropdown-toggle" href="#">About <b class="caret"></b></a>
            		<ul role="menu" class="dropdown-menu">
		            	{% for page in site.pages %}
                    
                    <!-- The reason we capture the news_page_url below is because Jekyll includes each individual pagified page in the
                    menu. There is most likely a better way of doing this because right now this isn't very robust.
                    The capture takes the page's url (ie. "/news/page3/index.html") and truncates it so it reads "/news/page" if it is a
                    pagified news file. Jekyll does NOT place the first page of the pagified series in "/news/page1/" instead it is just 
                    in "/news/" and that is why this process works. -->
                    
                    {% capture news_page_url %}{{ page.url | truncate: 10, '' }}{% endcapture %}

  		          		{% if page.title and page.sub == "about" and news_page_url != "/news/page" %}
  		          		  <li><a href="{{ page.url | prepend: site.baseurl }}">{{ page.title }}</a></li>
  		          		{% endif %}
		        		  {% endfor %}
		        	 </ul>
		          </li>
		        <li class="dropdown">
            		<a data-toggle="dropdown" class="dropdown-toggle" href="#">Projects <b class="caret"></b></a>
            		<ul role="menu" class="dropdown-menu">
		            	{% for page in site.pages %}
		          		{% if page.title and page.sub == "projects" %}
		          		<li><a href="{{ page.url | prepend: site.baseurl }}">{{ page.title }}</a></li>
		          		{% endif %}
		        		{% endfor %}
		        	</ul>
		        </li>
		        <li class="dropdown">
            		<a data-toggle="dropdown" class="dropdown-toggle" href="#">Resources<b class="caret"></b></a>
            		<ul role="menu" class="dropdown-menu">
		            {% for page in site.pages %}
		          		{% if page.title and page.sub == "resources" %}
		          		<li><a href="{{ page.url | prepend: site.baseurl }}">{{ page.title }}</a></li>
		          		{% endif %}
		        		{% endfor %}
		        	</ul>
		        </li>
            <li class="dropdown">
                <a data-toggle="dropdown" class="dropdown-toggle" href="#">Community<b class="caret"></b></a>
                <ul role="menu" class="dropdown-menu">
                {% for page in site.pages %}
                  {% if page.title and page.sub == "community" %}
                  <li><a href="{{ page.url | prepend: site.baseurl }}">{{ page.title }}</a></li>
                  {% endif %}
                {% endfor %}
              </ul>
            </li>
          </ul>
        </div>
    </nav>
</div>
</header>
